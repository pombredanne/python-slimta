<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>slimta.policy &mdash; slimta 0.3.8 documentation</title>
    
    <link rel="stylesheet" href="../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="slimta 0.3.8 documentation" href="../index.html" />
    <link rel="up" title="slimta" href="slimta.html" />
    <link rel="next" title="slimta.policy.headers" href="slimta.policy.headers.html" />
    <link rel="prev" title="slimta.bounce" href="slimta.bounce.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="slimta.policy.headers.html" title="slimta.policy.headers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="slimta.bounce.html" title="slimta.bounce"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">slimta 0.3.8 documentation</a> &raquo;</li>
          <li><a href="../api.html" >API Reference</a> &raquo;</li>
          <li><a href="slimta.html" accesskey="U">slimta</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-slimta.policy">
<span id="slimta-policy"></span><h1>slimta.policy<a class="headerlink" href="#module-slimta.policy" title="Permalink to this headline">¶</a></h1>
<p>Package containing useful policies, which can be configured to run before
queuing or before relaying the message with the
<a class="reference internal" href="slimta.queue.html#slimta.queue.Queue.add_policy" title="slimta.queue.Queue.add_policy"><tt class="xref py py-meth docutils literal"><span class="pre">slimta.queue.Queue.add_policy()</span></tt></a> and
<a class="reference internal" href="slimta.relay.html#slimta.relay.Relay.add_policy" title="slimta.relay.Relay.add_policy"><tt class="xref py py-meth docutils literal"><span class="pre">slimta.relay.Relay.add_policy()</span></tt></a>, respectively.</p>
<p>If a policy is applied before queuing, it is executed only once and any changes
it makes to the <a class="reference internal" href="slimta.envelope.html#slimta.envelope.Envelope" title="slimta.envelope.Envelope"><tt class="xref py py-class docutils literal"><span class="pre">Envelope</span></tt></a> will be stored persistently. This is especially
useful for tasks such as header and content modification, since these may be
more expensive operations and should only run once.</p>
<p>If a policy is applied before relaying, it is executed before each delivery
attempt and no resulting changes will be persisted to storage. This is useful
for policies that have to do with delivery, such as forwarding.</p>
<dl class="exception">
<dt id="slimta.policy.PolicyError">
<em class="property">exception </em><tt class="descclassname">slimta.policy.</tt><tt class="descname">PolicyError</tt><a class="headerlink" href="#slimta.policy.PolicyError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">slimta.core.SlimtaError</span></tt></p>
<p>Base exception for all custom <tt class="docutils literal"><span class="pre">slimta.policy</span></tt> errors.</p>
</dd></dl>

<dl class="class">
<dt id="slimta.policy.QueuePolicy">
<em class="property">class </em><tt class="descclassname">slimta.policy.</tt><tt class="descname">QueuePolicy</tt><a class="headerlink" href="#slimta.policy.QueuePolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Base class for queue policies. These are run before a message is
persistently queued and may overwrite the original <a class="reference internal" href="slimta.envelope.html#slimta.envelope.Envelope" title="slimta.envelope.Envelope"><tt class="xref py py-class docutils literal"><span class="pre">Envelope</span></tt></a> with one or
many new <a class="reference internal" href="slimta.envelope.html#slimta.envelope.Envelope" title="slimta.envelope.Envelope"><tt class="xref py py-class docutils literal"><span class="pre">Envelope</span></tt></a> objects.</p>
<dl class="method">
<dt id="slimta.policy.QueuePolicy.apply">
<tt class="descname">apply</tt><big>(</big><em>envelope</em><big>)</big><a class="headerlink" href="#slimta.policy.QueuePolicy.apply" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#slimta.policy.QueuePolicy" title="slimta.policy.QueuePolicy"><tt class="xref py py-class docutils literal"><span class="pre">QueuePolicy</span></tt></a> sub-classes must override this method, which
will be called by the <a class="reference internal" href="slimta.queue.html#slimta.queue.Queue" title="slimta.queue.Queue"><tt class="xref py py-class docutils literal"><span class="pre">Queue</span></tt></a> before storage.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>envelope</strong> &#8211; The <a class="reference internal" href="slimta.envelope.html#slimta.envelope.Envelope" title="slimta.envelope.Envelope"><tt class="xref py py-class docutils literal"><span class="pre">Envelope</span></tt></a> object the policy execution should
apply any changes to. This envelope object <em>may</em> be
modified, though if new envelopes are returned this
object is discarded.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Optionally return or generate an iterable of <a class="reference internal" href="slimta.envelope.html#slimta.envelope.Envelope" title="slimta.envelope.Envelope"><tt class="xref py py-class docutils literal"><span class="pre">Envelope</span></tt></a>
objects to replace the given <tt class="docutils literal"><span class="pre">envelope</span></tt> going forward.
Returning <tt class="docutils literal"><span class="pre">None</span></tt> or an empty list will keep using
<tt class="docutils literal"><span class="pre">envelope</span></tt>.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="slimta.policy.RelayPolicy">
<em class="property">class </em><tt class="descclassname">slimta.policy.</tt><tt class="descname">RelayPolicy</tt><a class="headerlink" href="#slimta.policy.RelayPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Base class for relay policies. These are run immediately before a relay
attempt is made.</p>
<dl class="method">
<dt id="slimta.policy.RelayPolicy.apply">
<tt class="descname">apply</tt><big>(</big><em>envelope</em><big>)</big><a class="headerlink" href="#slimta.policy.RelayPolicy.apply" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#slimta.policy.RelayPolicy" title="slimta.policy.RelayPolicy"><tt class="xref py py-class docutils literal"><span class="pre">RelayPolicy</span></tt></a> sub-classes must override this method, which
will be called by the <a class="reference internal" href="slimta.relay.html#slimta.relay.Relay" title="slimta.relay.Relay"><tt class="xref py py-class docutils literal"><span class="pre">Relay</span></tt></a> before delivery.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>envelope</strong> &#8211; The <a class="reference internal" href="slimta.envelope.html#slimta.envelope.Envelope" title="slimta.envelope.Envelope"><tt class="xref py py-class docutils literal"><span class="pre">Envelope</span></tt></a> object the policy execution should
apply any changes to.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<p><strong>Sub-Modules:</strong></p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="slimta.policy.headers.html">slimta.policy.headers</a></li>
<li class="toctree-l1"><a class="reference internal" href="slimta.policy.forward.html">slimta.policy.forward</a></li>
<li class="toctree-l1"><a class="reference internal" href="slimta.policy.split.html">slimta.policy.split</a></li>
<li class="toctree-l1"><a class="reference internal" href="slimta.policy.spamassassin.html">slimta.policy.spamassassin</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="slimta.bounce.html"
                        title="previous chapter">slimta.bounce</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="slimta.policy.headers.html"
                        title="next chapter">slimta.policy.headers</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="slimta.policy.headers.html" title="slimta.policy.headers"
             >next</a> |</li>
        <li class="right" >
          <a href="slimta.bounce.html" title="slimta.bounce"
             >previous</a> |</li>
        <li><a href="../index.html">slimta 0.3.8 documentation</a> &raquo;</li>
          <li><a href="../api.html" >API Reference</a> &raquo;</li>
          <li><a href="slimta.html" >slimta</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ian Good.
    </div>
  </body>
</html>